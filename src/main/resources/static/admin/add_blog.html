<head>
    <link rel="shortcut icon" href="../icon/snow.ico" type="image/x-icon" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/editormd.css" />
    <link rel="shortcut icon" href="https://pandao.github.io/editor.md/favicon.ico" type="image/x-icon" />
</head>
    <v-row>
        <v-col span="6">
            <v-form-item class="text-warning" label="博客标题(必须)">
                <v-input ></v-input>
            </v-form-item>
        </v-col>
        <v-col span="6">
            <v-form-item label="自定义访问路径">
                <v-input ></v-input>
            </v-form-item>
        </v-col>
    </v-row>

    <div class="clearfix"></div>
    <div id="page-wrapper">
      <div id="editormd">
          <textarea style="display:none;">### Hello Editor.md !</textarea>
      </div>
    </div>

<script src="../js/editormd.js"></script>
<script>

    var vm = new Vue({
        el: '#app',
        data:{
            editor:Object,
            options:Object,
            mdData:{
                mdText:11,
                article:"",
                title:"",
                slug:"",
                tags:"",
                categories:"",
            }
        },
        methods : {
            getData:function () {
                this._data.mdData.mdText = this.editor.getMarkdown();
                this._data.mdData.article = this.editor.getHTML();
                this._data.mdData.title = document.blogFrom.title.value;
                this._data.mdData.slug = document.blogFrom.slug.value;
                this._data.mdData.tags = document.blogFrom.tags.value;
                this._data.mdData.categories = document.blogFrom.categories.value;
                axios.post("/admin/send",this._data.mdData).then(function (response){
                    $.alert(response.data);
                    if(response.data.code === 1)
                        var t=setTimeout(" window.location.href = \"/admin/bloglist.html\" ",1500);
                }).catch(function (e) {
                    console.log(e.valueOf());
                });

            }
        } ,
        mounted : function () {
            debugger
            var self= this;
            axios.get("/admin/category/index").then(function (response) {
                self.options = response.data;

            }).catch(function (e) {
                console.log(e);
            });

            var testEditor = editormd("editormd", {
                    width: "50%",
                    height: 200,
                    path : '../lib',
                    theme : "default",
                    previewTheme : "default",
                    editorTheme : "default",
                    markdown : "",
                    codeFold : true,
                    saveHTMLToTextarea : true,    // 保存 HTML 到 Textarea
                    searchReplace : true,
                    htmlDecode : "style,script,iframe|on*",            // 开启 HTML 标签解析，为了
                    emoji : true,
                    taskList : true,
                    tocm            : true,         // Using [TOCM]
                    tex : true,                   // 开启科学公式TeX语言支持，默认关闭
                    imageUpload : true,
                    imageFormats : ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
                    imageUploadURL : "/admin/upload",
                    onload : function() {
                        console.log('onload', this);
                    }
             });






        }
    });


</script>
