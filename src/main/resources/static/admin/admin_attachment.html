<head>
    <link rel="stylesheet" href="../plugins/fileinput/fileinput.min.css">

</head>
<v-box>
    <style type="text/css" rel="stylesheet">
        #showForm{margin-left:4px;padding:3px 6px;position:relative;top:-4px;border:1px solid #ccc;border-radius:2px;background:#fff;text-shadow:none;font-weight:600;font-size:12px;line-height:normal;color:#3c8dbc;cursor:pointer;transition:all .2s ease-in-out}
        #showForm:hover{background:#3c8dbc;color:#fff}
        .div-thumbnail{transition:all .5s ease-in-out;padding:10px}
        .thumbnail{margin-bottom:0}
    </style>
    <section class="content-header">
        <h1 style="display: inline-block;">11</h1>
        <a id="showForm" href="#">
            <i class="fa fa-cloud-upload" aria-hidden="true"></i>上传附件
        </a>
        <ol class="breadcrumb">
            <li><a data-pjax="true" href="/admin"><i class="fa fa-dashboard"></i> index/a></li>
            <li class="active">sss</li>
        </ol>
    </section>
    <section class="content container-fluid">
        <div class="row" id="uploadForm" style="display: none;">
            <div class="col-md-12">
                <div class="form-group">
                    <div class="file-loading">
                        <input id="uploadImg" class="file-loading" type="file" multiple name="file">
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        </div>
    </section>
</v-box>
<script src="../plugins/fileinput/fileinput.min.js"></script>
<script src="../plugins/fileinput/zh.min.js"></script>

<script>
    new Vue({
        el: '#app',
        data: {},
        methods:{
            openDetail:function () {
                layer.open({
                    type: 2,
                    title: 'title" />',
                    shadeClose: true,
                    shade: 0.5,
                    maxmin: true,
                    area: ['90%', '90%'],
                    content: '/admin/attachments/attachment?attachId=' + id,
                    scrollbar: false
                });
            },
            loadFileInput:function () {
                debugger;

                
            }
        },
        mounted () {
            debugger;
            $('#uploadImg').fileinput({
                language: 'zh',
                uploadUrl: '/admin/attachments/upload',
                uploadAsync: true,
                allowedFileExtensions: ['jpg','gif','png','jpeg','svg','psd'],
                maxFileCount: 100,
                enctype : 'multipart/form-data',
                showClose: false

            }).on("fileuploaded",function (event,data,previewId,index) {
                var data = data.jqXHR.responseJSON;
                if(data.success=="1"){
                    $("#uploadForm").hide(400);
                    $.toast({
                        text: data.message,
                        heading: '<@spring.message code="common.text.tips" />',
                        icon: 'success',
                        showHideTransition: 'fade',
                        allowToastClose: true,
                        hideAfter: 1000,
                        stack: 1,
                        position: 'top-center',
                        textAlign: 'left',
                        loader: true,
                        loaderBg: '#ffffff',
                        afterHidden: function () {
                            window.location.reload();
                        }
                    });
                }
            });
        }
    })
</script>